ðŸŸ§ï¸  wait-fs: 2024/12/29 00:06:57 wait-fs.go:40: /mnt/flux/flux-operator-done.txt
ðŸŸ§ï¸  wait-fs: 2024/12/29 00:06:57 wait-fs.go:49: Found existing path /mnt/flux/flux-operator-done.txt

Hello user root

ðŸŒŸï¸ Curve Certificate
curve.cert
#   ****  Generated on 2023-04-26 22:54:42 by CZMQ  ****
#   ZeroMQ CURVE **Secret** Certificate
#   DO NOT PROVIDE THIS FILE TO OTHER USERS nor change its permissions.
    
metadata
    name = "flux-cert-generator"
    keygen.hostname = "flux-sample-0"
curve
    public-key = ":*Zj}8h).NKv2Iw^Gy!lWeEatH6Jw>>SFNt2OV2>"
    secret-key = ":O[id>XY*$>EyYBBTD&[[u!CkODP-{fZ!)cjBH[o"

ðŸ“¦ Resources
flux R encode --hosts=flux-sample-[0-6] --local
{"version": 1, "execution": {"R_lite": [{"rank": "0-6", "children": {"core": "0-7"}}], "starttime": 0.0, "expiration": 0.0, "nodelist": ["flux-sample-[0-6]"]}}
ðŸ‘‹ Hello, I'm flux-sample-0
The main host is flux-sample-0
The working directory is /home/fluxuser, contents include:
ðŸš©ï¸ Flux Option Flags defined
Command provided is: /bin/bash /entrypoint.sh

ðŸŒ€ Launcher Mode: flux start -o --config /mnt/flux/view/etc/flux/config -Scron.directory=/etc/flux/system/cron.d   -Stbon.fanout=256   -Srundir=/mnt/flux/view/run/flux    -Sstatedir=/mnt/flux/view/var/lib/flux -Slocal-uri=local:///mnt/flux/view/run/flux/local -Stbon.connect_timeout=5s -Stbon.topo=binomial    -Slog-stderr-level=6    -Slog-stderr-mode=local  
broker.info[0]: start: none->join 0.390018ms
broker.info[0]: parent-none: join->init 0.01039ms
cron.info[0]: synchronizing cron tasks to event heartbeat.pulse
job-manager.info[0]: restart: 0 jobs
job-manager.info[0]: restart: 0 running jobs
job-manager.info[0]: restart: checkpoint.job-manager not found
broker.info[0]: rc1.0: running /etc/flux/rc1.d/01-sched-fluxion
sched-fluxion-resource.info[0]: version 0.40.0-4-g3fb0b4e7
sched-fluxion-resource.warning[0]: create_reader: allowlist unsupported
sched-fluxion-resource.info[0]: populate_resource_db: loaded resources from core's resource.acquire
sched-fluxion-qmanager.info[0]: version 0.40.0-4-g3fb0b4e7
broker.info[0]: rc1.0: running /etc/flux/rc1.d/02-cron
broker.info[0]: rc1.0: /etc/flux/rc1 Exited (rc=0) 0.4s
broker.info[0]: rc1-success: init->quorum 0.408387s
broker.info[0]: online: flux-sample-0 (ranks 0)
broker.info[0]: online: flux-sample-[0-6] (ranks 0-6)
broker.info[0]: quorum-full: quorum->run 0.821436s
MODULE STATS CONTENT
[1;39m{
  [0m[34;1m"count"[0m[1;39m: [0m[0;39m0[0m[1;39m,
  [0m[34;1m"valid"[0m[1;39m: [0m[0;39m0[0m[1;39m,
  [0m[34;1m"dirty"[0m[1;39m: [0m[0;39m0[0m[1;39m,
  [0m[34;1m"size"[0m[1;39m: [0m[0;39m0[0m[1;39m,
  [0m[34;1m"flush-batch-count"[0m[1;39m: [0m[0;39m0[0m[1;39m,
  [0m[34;1m"mmap"[0m[1;39m: [0m[1;39m{
    [0m[34;1m"tags"[0m[1;39m: [0m[1;39m{}[0m[1;39m,
    [0m[34;1m"blobs"[0m[1;39m: [0m[0;39m0[0m[1;39m
  [1;39m}[0m[1;39m
[1;39m}[0m
NODES
7
TOPOLOGY diagram
0 flux-sample-0: full
â”œâ”€ 1 flux-sample-1: full
â”œâ”€ 2 flux-sample-2: full
â”‚  â””â”€ 3 flux-sample-3: full
â””â”€ 4 flux-sample-4: full
   â”œâ”€ 5 flux-sample-5: full
   â””â”€ 6 flux-sample-6: full
TOPOLOGY description
binomial
RANKS 7
EVENT flux-ping-broker-size-0-rank-0
flux-ping 0!broker
0!broker.ping pad=0 seq=0 time=0.087 ms (0e09f5d5!46c72274!5596f0aa)
EVENT flux-ping-kvs-size-0-rank-0
flux-ping 0!kvs
0!kvs.ping pad=0 seq=0 time=0.159 ms (69344945!46c72274!5596f0aa!5596f0aa)
EVENT flux-ping-broker-size-0-rank-1
flux-ping 1!broker
1!broker.ping pad=0 seq=0 time=0.509 ms (b10d53e7!46c72274!5596f0aa!1c3767eb)
EVENT flux-ping-kvs-size-0-rank-1
flux-ping 1!kvs
1!kvs.ping pad=0 seq=0 time=0.351 ms (fb227070!46c72274!5596f0aa!1c3767eb!1c3767eb)
EVENT flux-ping-broker-size-0-rank-2
flux-ping 2!broker
2!broker.ping pad=0 seq=0 time=0.514 ms (f64a8d1e!46c72274!5596f0aa!a81a920c)
EVENT flux-ping-kvs-size-0-rank-2
flux-ping 2!kvs
2!kvs.ping pad=0 seq=0 time=0.349 ms (3953225f!46c72274!5596f0aa!a81a920c!a81a920c)
EVENT flux-ping-broker-size-0-rank-3
flux-ping 3!broker
3!broker.ping pad=0 seq=0 time=0.466 ms (8df52c8d!46c72274!5596f0aa!a81a920c!b8ecfc1d)
EVENT flux-ping-kvs-size-0-rank-3
flux-ping 3!kvs
3!kvs.ping pad=0 seq=0 time=0.561 ms (8875af47!46c72274!5596f0aa!a81a920c!b8ecfc1d!b8ecfc1d)
EVENT flux-ping-broker-size-0-rank-4
flux-ping 4!broker
4!broker.ping pad=0 seq=0 time=0.405 ms (fd541771!46c72274!5596f0aa!0a452142)
EVENT flux-ping-kvs-size-0-rank-4
flux-ping 4!kvs
4!kvs.ping pad=0 seq=0 time=0.376 ms (a4aecfe7!46c72274!5596f0aa!0a452142!0a452142)
EVENT flux-ping-broker-size-0-rank-5
flux-ping 5!broker
5!broker.ping pad=0 seq=0 time=0.633 ms (54bab84d!46c72274!5596f0aa!0a452142!9b217865)
EVENT flux-ping-kvs-size-0-rank-5
flux-ping 5!kvs
5!kvs.ping pad=0 seq=0 time=0.538 ms (13d7b7dd!46c72274!5596f0aa!0a452142!9b217865!9b217865)
EVENT flux-ping-broker-size-0-rank-6
flux-ping 6!broker
6!broker.ping pad=0 seq=0 time=0.582 ms (aa556ace!46c72274!5596f0aa!0a452142!68745741)
EVENT flux-ping-kvs-size-0-rank-6
flux-ping 6!kvs
6!kvs.ping pad=0 seq=0 time=0.605 ms (cab6af5c!46c72274!5596f0aa!0a452142!68745741!68745741)
EVENT flux-ping-broker-size-200-rank-0
flux-ping 0!broker
0!broker.ping pad=209715200 seq=0 time=6330.070 ms (2f806c1d!46c72274!5596f0aa)
EVENT flux-ping-kvs-size-200-rank-0
flux-ping 0!kvs
0!kvs.ping pad=209715200 seq=0 time=6242.030 ms (e5dfb442!46c72274!5596f0aa!5596f0aa)
EVENT flux-ping-broker-size-200-rank-1
flux-ping 1!broker
1!broker.ping pad=209715200 seq=0 time=7800.213 ms (51734b74!46c72274!5596f0aa!1c3767eb)
EVENT flux-ping-kvs-size-200-rank-1
flux-ping 1!kvs
1!kvs.ping pad=209715200 seq=0 time=7724.230 ms (1fee238f!46c72274!5596f0aa!1c3767eb!1c3767eb)
EVENT flux-ping-broker-size-200-rank-2
flux-ping 2!broker
2!broker.ping pad=209715200 seq=0 time=7624.933 ms (995334b9!46c72274!5596f0aa!a81a920c)
EVENT flux-ping-kvs-size-200-rank-2
flux-ping 2!kvs
2!kvs.ping pad=209715200 seq=0 time=7822.980 ms (c7eb3bca!46c72274!5596f0aa!a81a920c!a81a920c)
EVENT flux-ping-broker-size-200-rank-3
flux-ping 3!broker
3!broker.ping pad=209715200 seq=0 time=9279.450 ms (1b7cfcf8!46c72274!5596f0aa!a81a920c!b8ecfc1d)
EVENT flux-ping-kvs-size-200-rank-3
flux-ping 3!kvs
3!kvs.ping pad=209715200 seq=0 time=9671.534 ms (aa40894a!46c72274!5596f0aa!a81a920c!b8ecfc1d!b8ecfc1d)
EVENT flux-ping-broker-size-200-rank-4
flux-ping 4!broker
4!broker.ping pad=209715200 seq=0 time=7927.820 ms (1c71dd27!46c72274!5596f0aa!0a452142)
EVENT flux-ping-kvs-size-200-rank-4
flux-ping 4!kvs
4!kvs.ping pad=209715200 seq=0 time=7858.078 ms (048efefb!46c72274!5596f0aa!0a452142!0a452142)
EVENT flux-ping-broker-size-200-rank-5
flux-ping 5!broker
5!broker.ping pad=209715200 seq=0 time=9363.557 ms (da0441b1!46c72274!5596f0aa!0a452142!9b217865)
EVENT flux-ping-kvs-size-200-rank-5
flux-ping 5!kvs
5!kvs.ping pad=209715200 seq=0 time=9296.780 ms (14c9165f!46c72274!5596f0aa!0a452142!9b217865!9b217865)
EVENT flux-ping-broker-size-200-rank-6
flux-ping 6!broker
6!broker.ping pad=209715200 seq=0 time=9387.373 ms (4c478b09!46c72274!5596f0aa!0a452142!68745741)
EVENT flux-ping-kvs-size-200-rank-6
flux-ping 6!kvs
6!kvs.ping pad=209715200 seq=0 time=9438.509 ms (b5eeb6a7!46c72274!5596f0aa!0a452142!68745741!68745741)
EVENT flux-ping-broker-size-400-rank-0
flux-ping 0!broker
0!broker.ping pad=419430400 seq=0 time=12217.751 ms (475c63b0!46c72274!5596f0aa)
EVENT flux-ping-kvs-size-400-rank-0
flux-ping 0!kvs
0!kvs.ping pad=419430400 seq=0 time=12404.986 ms (1e20b9b8!46c72274!5596f0aa!5596f0aa)
EVENT flux-ping-broker-size-400-rank-1
flux-ping 1!broker
1!broker.ping pad=419430400 seq=0 time=15726.741 ms (3442e3ef!46c72274!5596f0aa!1c3767eb)
EVENT flux-ping-kvs-size-400-rank-1
flux-ping 1!kvs
1!kvs.ping pad=419430400 seq=0 time=15266.498 ms (0c37cc7e!46c72274!5596f0aa!1c3767eb!1c3767eb)
EVENT flux-ping-broker-size-400-rank-2
flux-ping 2!broker
2!broker.ping pad=419430400 seq=0 time=15596.896 ms (1869dfa7!46c72274!5596f0aa!a81a920c)
EVENT flux-ping-kvs-size-400-rank-2
flux-ping 2!kvs
2!kvs.ping pad=419430400 seq=0 time=15587.208 ms (fbb03d69!46c72274!5596f0aa!a81a920c!a81a920c)
EVENT flux-ping-broker-size-400-rank-3
flux-ping 3!broker
3!broker.ping pad=419430400 seq=0 time=18425.590 ms (7c7467af!46c72274!5596f0aa!a81a920c!b8ecfc1d)
EVENT flux-ping-kvs-size-400-rank-3
flux-ping 3!kvs
3!kvs.ping pad=419430400 seq=0 time=18811.830 ms (b8dfe4f2!46c72274!5596f0aa!a81a920c!b8ecfc1d!b8ecfc1d)
EVENT flux-ping-broker-size-400-rank-4
flux-ping 4!broker
4!broker.ping pad=419430400 seq=0 time=15470.203 ms (29977624!46c72274!5596f0aa!0a452142)
EVENT flux-ping-kvs-size-400-rank-4
flux-ping 4!kvs
4!kvs.ping pad=419430400 seq=0 time=15433.766 ms (ffa18ace!46c72274!5596f0aa!0a452142!0a452142)
EVENT flux-ping-broker-size-400-rank-5
flux-ping 5!broker
5!broker.ping pad=419430400 seq=0 time=18651.036 ms (944551ba!46c72274!5596f0aa!0a452142!9b217865)
EVENT flux-ping-kvs-size-400-rank-5
flux-ping 5!kvs
5!kvs.ping pad=419430400 seq=0 time=18715.203 ms (6796a3b8!46c72274!5596f0aa!0a452142!9b217865!9b217865)
EVENT flux-ping-broker-size-400-rank-6
flux-ping 6!broker
6!broker.ping pad=419430400 seq=0 time=18512.933 ms (1922b311!46c72274!5596f0aa!0a452142!68745741)
EVENT flux-ping-kvs-size-400-rank-6
flux-ping 6!kvs
6!kvs.ping pad=419430400 seq=0 time=18807.589 ms (9489d0a9!46c72274!5596f0aa!0a452142!68745741!68745741)
EVENT flux-ping-broker-size-600-rank-0
flux-ping 0!broker
0!broker.ping pad=629145600 seq=0 time=18752.600 ms (cd7db5ff!46c72274!5596f0aa)
EVENT flux-ping-kvs-size-600-rank-0
flux-ping 0!kvs
0!kvs.ping pad=629145600 seq=0 time=18629.915 ms (a5c3f27e!46c72274!5596f0aa!5596f0aa)
EVENT flux-ping-broker-size-600-rank-1
flux-ping 1!broker
1!broker.ping pad=629145600 seq=0 time=23711.012 ms (52c9373b!46c72274!5596f0aa!1c3767eb)
EVENT flux-ping-kvs-size-600-rank-1
flux-ping 1!kvs
1!kvs.ping pad=629145600 seq=0 time=23664.789 ms (4e2d790a!46c72274!5596f0aa!1c3767eb!1c3767eb)
EVENT flux-ping-broker-size-600-rank-2
flux-ping 2!broker
2!broker.ping pad=629145600 seq=0 time=23620.559 ms (48c907f2!46c72274!5596f0aa!a81a920c)
EVENT flux-ping-kvs-size-600-rank-2
flux-ping 2!kvs
2!kvs.ping pad=629145600 seq=0 time=23484.544 ms (c72dffd0!46c72274!5596f0aa!a81a920c!a81a920c)
EVENT flux-ping-broker-size-600-rank-3
flux-ping 3!broker
3!broker.ping pad=629145600 seq=0 time=28116.549 ms (7d97bfc7!46c72274!5596f0aa!a81a920c!b8ecfc1d)
EVENT flux-ping-kvs-size-600-rank-3
flux-ping 3!kvs
3!kvs.ping pad=629145600 seq=0 time=28422.398 ms (5f67d933!46c72274!5596f0aa!a81a920c!b8ecfc1d!b8ecfc1d)
EVENT flux-ping-broker-size-600-rank-4
flux-ping 4!broker
4!broker.ping pad=629145600 seq=0 time=23655.239 ms (2cd1fd46!46c72274!5596f0aa!0a452142)
EVENT flux-ping-kvs-size-600-rank-4
flux-ping 4!kvs
4!kvs.ping pad=629145600 seq=0 time=23690.969 ms (87d9554e!46c72274!5596f0aa!0a452142!0a452142)
EVENT flux-ping-broker-size-600-rank-5
flux-ping 5!broker
5!broker.ping pad=629145600 seq=0 time=28174.460 ms (27c9d67a!46c72274!5596f0aa!0a452142!9b217865)
EVENT flux-ping-kvs-size-600-rank-5
flux-ping 5!kvs
5!kvs.ping pad=629145600 seq=0 time=28084.809 ms (66aa4328!46c72274!5596f0aa!0a452142!9b217865!9b217865)
EVENT flux-ping-broker-size-600-rank-6
flux-ping 6!broker
6!broker.ping pad=629145600 seq=0 time=28280.483 ms (4a256cb9!46c72274!5596f0aa!0a452142!68745741)
EVENT flux-ping-kvs-size-600-rank-6
flux-ping 6!kvs
6!kvs.ping pad=629145600 seq=0 time=28168.207 ms (4c7f1b39!46c72274!5596f0aa!0a452142!68745741!68745741)
EVENT flux-ping-broker-size-800-rank-0
flux-ping 0!broker
0!broker.ping pad=838860800 seq=0 time=24669.362 ms (b2de6ae8!46c72274!5596f0aa)
EVENT flux-ping-kvs-size-800-rank-0
flux-ping 0!kvs
0!kvs.ping pad=838860800 seq=0 time=24673.283 ms (8e357ab4!46c72274!5596f0aa!5596f0aa)
EVENT flux-ping-broker-size-800-rank-1
flux-ping 1!broker
1!broker.ping pad=838860800 seq=0 time=30604.366 ms (3bc85587!46c72274!5596f0aa!1c3767eb)
EVENT flux-ping-kvs-size-800-rank-1
flux-ping 1!kvs
1!kvs.ping pad=838860800 seq=0 time=30389.553 ms (dbe10ef3!46c72274!5596f0aa!1c3767eb!1c3767eb)
EVENT flux-ping-broker-size-800-rank-2
flux-ping 2!broker
2!broker.ping pad=838860800 seq=0 time=30441.724 ms (49981c02!46c72274!5596f0aa!a81a920c)
EVENT flux-ping-kvs-size-800-rank-2
flux-ping 2!kvs
2!kvs.ping pad=838860800 seq=0 time=30763.457 ms (618bfad0!46c72274!5596f0aa!a81a920c!a81a920c)
EVENT flux-ping-broker-size-800-rank-3
flux-ping 3!broker
3!broker.ping pad=838860800 seq=0 time=37071.884 ms (d9150f49!46c72274!5596f0aa!a81a920c!b8ecfc1d)
EVENT flux-ping-kvs-size-800-rank-3
flux-ping 3!kvs
3!kvs.ping pad=838860800 seq=0 time=36679.715 ms (b019ee0e!46c72274!5596f0aa!a81a920c!b8ecfc1d!b8ecfc1d)
EVENT flux-ping-broker-size-800-rank-4
flux-ping 4!broker
4!broker.ping pad=838860800 seq=0 time=30539.397 ms (89ed00eb!46c72274!5596f0aa!0a452142)
EVENT flux-ping-kvs-size-800-rank-4
flux-ping 4!kvs
4!kvs.ping pad=838860800 seq=0 time=30398.243 ms (3bbb449b!46c72274!5596f0aa!0a452142!0a452142)
EVENT flux-ping-broker-size-800-rank-5
flux-ping 5!broker
5!broker.ping pad=838860800 seq=0 time=36816.558 ms (7bd7527f!46c72274!5596f0aa!0a452142!9b217865)
EVENT flux-ping-kvs-size-800-rank-5
flux-ping 5!kvs
5!kvs.ping pad=838860800 seq=0 time=36696.524 ms (66941cd4!46c72274!5596f0aa!0a452142!9b217865!9b217865)
EVENT flux-ping-broker-size-800-rank-6
flux-ping 6!broker
6!broker.ping pad=838860800 seq=0 time=36936.194 ms (086655d6!46c72274!5596f0aa!0a452142!68745741)
EVENT flux-ping-kvs-size-800-rank-6
flux-ping 6!kvs
6!kvs.ping pad=838860800 seq=0 time=37209.657 ms (dc483e39!46c72274!5596f0aa!0a452142!68745741!68745741)
EVENT flux-ping-broker-size-1000-rank-0
flux-ping 0!broker
0!broker.ping pad=1048576000 seq=0 time=30588.386 ms (169ba439!46c72274!5596f0aa)
EVENT flux-ping-kvs-size-1000-rank-0
flux-ping 0!kvs
0!kvs.ping pad=1048576000 seq=0 time=30262.243 ms (600690a5!46c72274!5596f0aa!5596f0aa)
EVENT flux-ping-broker-size-1000-rank-1
flux-ping 1!broker
1!broker.ping pad=1048576000 seq=0 time=38485.212 ms (0c1b8811!46c72274!5596f0aa!1c3767eb)
EVENT flux-ping-kvs-size-1000-rank-1
flux-ping 1!kvs
1!kvs.ping pad=1048576000 seq=0 time=37828.567 ms (f0358960!46c72274!5596f0aa!1c3767eb!1c3767eb)
EVENT flux-ping-broker-size-1000-rank-2
flux-ping 2!broker
2!broker.ping pad=1048576000 seq=0 time=38260.834 ms (93c31b61!46c72274!5596f0aa!a81a920c)
EVENT flux-ping-kvs-size-1000-rank-2
flux-ping 2!kvs
2!kvs.ping pad=1048576000 seq=0 time=38221.658 ms (09d52c57!46c72274!5596f0aa!a81a920c!a81a920c)
EVENT flux-ping-broker-size-1000-rank-3
flux-ping 3!broker
3!broker.ping pad=1048576000 seq=0 time=46051.465 ms (9c2958d6!46c72274!5596f0aa!a81a920c!b8ecfc1d)
EVENT flux-ping-kvs-size-1000-rank-3
flux-ping 3!kvs
3!kvs.ping pad=1048576000 seq=0 time=46136.473 ms (56cf3320!46c72274!5596f0aa!a81a920c!b8ecfc1d!b8ecfc1d)
EVENT flux-ping-broker-size-1000-rank-4
flux-ping 4!broker
4!broker.ping pad=1048576000 seq=0 time=38335.126 ms (d95a6366!46c72274!5596f0aa!0a452142)
EVENT flux-ping-kvs-size-1000-rank-4
flux-ping 4!kvs
4!kvs.ping pad=1048576000 seq=0 time=37753.991 ms (4d8c3337!46c72274!5596f0aa!0a452142!0a452142)
EVENT flux-ping-broker-size-1000-rank-5
flux-ping 5!broker
5!broker.ping pad=1048576000 seq=0 time=46252.359 ms (253ddd7e!46c72274!5596f0aa!0a452142!9b217865)
EVENT flux-ping-kvs-size-1000-rank-5
flux-ping 5!kvs
5!kvs.ping pad=1048576000 seq=0 time=46016.839 ms (80ac8531!46c72274!5596f0aa!0a452142!9b217865!9b217865)
EVENT flux-ping-broker-size-1000-rank-6
flux-ping 6!broker
6!broker.ping pad=1048576000 seq=0 time=46235.986 ms (37b9d17f!46c72274!5596f0aa!0a452142!68745741)
EVENT flux-ping-kvs-size-1000-rank-6
flux-ping 6!kvs
6!kvs.ping pad=1048576000 seq=0 time=46494.079 ms (c499c7c5!46c72274!5596f0aa!0a452142!68745741!68745741)
SCRIPT entrypoint

#!/bin/bash
# flux-topology.sh

flux exec -r all flux module reload content purge-target-size=104857600 # 100mb
echo "MODULE STATS CONTENT"
flux module stats content | jq

# Print the overlay to show the topology
echo "NODES"
echo "7"
echo "TOPOLOGY diagram"
flux overlay status
echo "TOPOLOGY description"
echo "binomial"

# Get the total size (number of children)
ranks=$(flux getattr size)
echo "RANKS ${ranks}"

# But we are testing this many...
nodes=7

# We start counting at 0
max_rank="$((nodes-1))"

# --pad
# Include in the payload a string of length *N* bytes. *N* may be a floating point number with optional multiplicative suffix (K,M,G). The payload will be echoed back in the response. This option can be used to explore the effect of message size on latency. Default: no padding.

# Limit is 2G
# flux-ping: flux-ping: pad: value 8192M too large (must be < 2G)

# target may be the name of a Flux service, e.g. "kvs". :program:`flux ping` will send a request to "kvs.ping". As a shorthand, target can include a rank or host prefix delimited by an exclamation point. :program:`flux ping 4!kvs` is equivalent to :option:`flux ping --rank 4 kvs` (see :option:`--rank` option below). Don't forget to quote the exclamation point if it is interpreted by your shell.

# As a shorthand, target may also simply be a rank or host by itself indicating that the broker on that rank/host, rather than a Flux service, is to be pinged. :command:`flux ping 1` is equivalent to :option:`flux ping --rank 1 broker`.
# Sizes 0, 200, 400, 600, 800, 1000 M

# Run flux ping for each of the kvs and broker, across all ranks (testing the topology) and message sizes up to
# Go up to 1000MB (1GB) 
for size in $(echo 0 200 400 600 800 1000)
  do
  for rank in $(seq 0 ${max_rank})
    do
    echo "EVENT flux-ping-broker-size-${size}-rank-${rank}"
    flux ping -c1 --pad=${size}M --rank ${rank} broker
    echo "EVENT flux-ping-kvs-size-${size}-rank-${rank}"
    flux ping -c1 --pad=${size}M --rank ${rank} kvs
  done
done

# Show self!
echo "SCRIPT entrypoint"
cat $0broker.info[0]: rc2.0: /bin/bash /entrypoint.sh Exited (rc=0) 1744.5s
broker.info[0]: rc2-success: run->cleanup 29.0747m
broker.info[0]: cleanup.0: flux queue stop --quiet --all --nocheckpoint Exited (rc=0) 0.1s
broker.info[0]: cleanup.1: flux resource acquire-mute Exited (rc=0) 0.1s
broker.info[0]: cleanup.2: flux cancel --user=all --quiet --states RUN Exited (rc=0) 0.1s
broker.info[0]: cleanup.3: flux queue idle --quiet Exited (rc=0) 0.1s
broker.info[0]: cleanup-success: cleanup->shutdown 0.274381s
broker.info[0]: children-complete: shutdown->finalize 0.121198s
broker.info[0]: rc3.0: running /etc/flux/rc3.d/01-sched-fluxion
kvs.err[0]: content_load_completion: content_load_get: No such file or directory
broker.err[0]: rc3.0: flux: Error committing finish event: No such file or directory
broker.err[0]: rc3.0: flux-content: content.flush: Function not implemented
content-sqlite.err[0]: unregister-backing: content backing store is not active: Invalid argument
broker.err[0]: rc3.0: /etc/flux/rc3 Exited (rc=1) 0.1s
broker.info[0]: rc3-fail: finalize->goodbye 0.112254s
broker.info[0]: goodbye: goodbye->exit 0.054343ms
